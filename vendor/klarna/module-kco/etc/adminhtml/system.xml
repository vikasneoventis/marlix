<?xml version="1.0"?>
<!--
/**
 * This file is part of the Klarna KCO module
 *
 * (c) Klarna Bank AB (publ)
 *
 * For the full copyright and license information, please view the NOTICE
 * and LICENSE files that were distributed with this source code.
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Config:etc/system_file.xsd">
    <system>
        <section id="payment">
            <group id="klarna_section">
                <group id="klarna">
                    <group id="klarna_kco_required" translate="label" sortOrder="20" showInDefault="1"
                           showInWebsite="1" showInStore="0">
                        <label>Klarna Checkout</label>
                        <attribute type="expanded">1</attribute>
                        <frontend_model>Magento\Config\Block\System\Config\Form\Fieldset</frontend_model>
                        <field id="active" translate="label" type="select" sortOrder="10" showInDefault="1"
                               showInWebsite="1" showInStore="0">
                            <label>Enable this Solution</label>
                            <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                            <config_path>payment/klarna_kco/active</config_path>
                        </field>
                        <field id="title" translate="label" type="text" sortOrder="10" showInDefault="1"
                               showInWebsite="1" showInStore="0">
                            <label>Title</label>
                            <config_path>payment/klarna_kco/title</config_path>
                        </field>
                        <field id="order_status" translate="label" type="select" sortOrder="30" showInDefault="1"
                               showInWebsite="1" showInStore="0">
                            <label>New order status</label>
                            <source_model>Magento\Sales\Model\Config\Source\Order\Status</source_model>
                            <config_path>payment/klarna_kco/order_status</config_path>
                        </field>
                        <field id="shipping_countries" translate="label comment" type="multiselect" sortOrder="40"
                               showInDefault="1" showInWebsite="1" showInStore="0">
                            <label>Shipping Countries</label>
                            <source_model>Magento\Directory\Model\Config\Source\Country</source_model>
                            <comment>Supported shipping countries for Klarna.</comment>
                            <config_path>payment/klarna_kco/shipping_countries</config_path>
                        </field>
                        <field id="disable_customer_group" translate="label comment" type="multiselect" sortOrder="50"
                               showInDefault="1" showInWebsite="1" showInStore="0">
                            <label>Disable Klarna for specific customer groups</label>
                            <source_model>Klarna\Kco\Model\System\Config\Source\Customer\Group</source_model>
                            <backend_model>Klarna\Kco\Model\System\Config\Backend\Multiselect</backend_model>
                            <can_be_empty>1</can_be_empty>
                            <comment>Selected groups will see standard checkout instead of Klarna checkout.</comment>
                            <config_path>payment/klarna_kco/disable_customer_group</config_path>
                        </field>
                        <field id="external_payment_methods" translate="label comment" type="multiselect" sortOrder="60"
                               showInDefault="1" showInWebsite="1" showInStore="0">
                            <label>External Payment Methods</label>
                            <source_model>Klarna\Kco\Model\System\Config\Source\Externalmethods</source_model>
                            <backend_model>Klarna\Kco\Model\System\Config\Backend\Multiselect</backend_model>
                            <can_be_empty>1</can_be_empty>
                            <comment>Additional payment methods not processed through Klarna, e.g. PayPal, that can be included on the Klarna checkout page. Make sure to enable the specific payment method first for it to show up in the list</comment>
                            <config_path>payment/klarna_kco/external_payment_methods</config_path>
                        </field>
                    </group>
                </group>
            </group>
        </section>
        <section id="checkout">
            <group id="klarna_kco" type="text" sortOrder="110" showInDefault="1" showInWebsite="1" showInStore="0"
                   translate="label">
                <label>Klarna Checkout Options</label>
                <field id="enabled" translate="label comment" type="select" sortOrder="10" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Enable Klarna Checkout</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment>Enable Klarna checkout for customers</comment>
                </field>
                <field id="merchant_checkbox" translate="label comment" type="select" sortOrder="20" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Merchant Checkbox</label>
                    <source_model>Klarna\Kco\Model\System\Config\Source\Merchantcheckbox</source_model>
                    <comment>Enable a checkbox within the checkout to trigger user behavior. May not available in all markets.</comment>
                </field>
                <field id="merchant_checkbox_text" translate="label comment" type="text" sortOrder="30"
                       showInDefault="1" showInWebsite="1" showInStore="0">
                    <label>Merchant Checkbox Text</label>
                    <comment>Leave blank to use default text with selected method.</comment>
                    <depends>
                        <field id="merchant_checkbox">1</field>
                    </depends>
                </field>
                <field id="merchant_checkbox_required" translate="label comment" type="select" sortOrder="40"
                       showInDefault="1" showInWebsite="1" showInStore="0">
                    <label>Merchant Checkbox Required</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment>If the checkbox must be checked before the customer can place the order.</comment>
                    <depends>
                        <field id="merchant_checkbox">1</field>
                    </depends>
                </field>
                <field id="merchant_checkbox_checked" translate="label comment" type="select" sortOrder="50"
                       showInDefault="1" showInWebsite="1" showInStore="0">
                    <label>Merchant Checkbox Checked</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment>If the checkbox will be checked by default.</comment>
                    <depends>
                        <field id="merchant_checkbox">1</field>
                    </depends>
                </field>
                <field id="guest_checkout" translate="label" type="select" sortOrder="60" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Allow Guest Checkout</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                </field>
                <field id="terms_url" translate="label" type="text" sortOrder="70" showInDefault="1" showInWebsite="1"
                       showInStore="0">
                    <label>URL to terms and conditions</label>
                    <validate>required-entry</validate>
                    <comment>URL to this stores own terms and conditions.</comment>
                </field>
                <field id="failure_url" translate="label comment" type="text" sortOrder="75" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>URL to redirect for checkout failures</label>
                    <comment>Must be a fully qualified URL. If left blank, defaults to the cart URL.</comment>
                </field>
                <field id="shipping_in_iframe" translate="label comment" type="select" sortOrder="80" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Shipping methods in iframe</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment>Display shipping methods in Klarna iframe. (This is ignored and forced to 'no' in some markets)</comment>
                </field>
                <field id="separate_address" translate="label comment" type="select" sortOrder="85" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Separate shipping addresses</label>
                    <source_model>Magento\Config\Model\Config\Source\Enabledisable</source_model>
                    <comment>Allow shipping address to be different from billing address.</comment>
                </field>
                <field id="auto_focus" translate="label">
                    <label>Auto focus Klarna Checkout</label>
                    <source_model>Magento\Config\Model\Config\Source\Enabledisable</source_model>
                </field>
                <field id="merchant_prefill" translate="label comment" type="select" sortOrder="90" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Pre-fill Customer Details</label>
                    <source_model>Magento\Config\Model\Config\Source\Enabledisable</source_model>
                    <comment>Pre-fill Klarna Checkout with stored customer data.</comment>
                </field>
                <field id="title_mandatory" translate="label comment" type="select" sortOrder="100" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Title mandatory</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment>Only available in certain markets.</comment>
                </field>
                <field id="dob_mandatory" translate="label comment" type="select" sortOrder="110" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Date of birth mandatory</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment>Only available in certain markets.</comment>
                </field>
                <field id="enable_b2b" translate="label comment" type="select" sortOrder="120" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Enable B2B mode</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment>Enable B2B checkout mode</comment>
                </field>
                <field id="business_id_attribute" translate="label comment" type="select" sortOrder="121" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Business ID attribute</label>
                    <source_model>Klarna\Kco\Model\System\Config\Source\Customer\CustomAttributes</source_model>
                    <comment>Custom attribute for business id</comment>
                    <depends>
                        <field id="enable_b2b">1</field>
                    </depends>
                </field>
            </group>
            <group id="klarna_kco_design" type="text" sortOrder="111" showInDefault="1" showInWebsite="1"
                   showInStore="0" translate="label">
                <label>Klarna Checkout Design</label>
                <field id="color_button" translate="label" type="text" sortOrder="10" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Checkout button color</label>
                    <comment>Example: #0072CC</comment>
                </field>
                <field id="color_button_text" translate="label" type="text" sortOrder="20" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Checkout button text color</label>
                    <comment>Example: #0072CC</comment>
                </field>
                <field id="color_checkbox" translate="label" type="text" sortOrder="30" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Checkout checkbox color</label>
                    <comment>Example: #0072CC</comment>
                </field>
                <field id="color_checkbox_checkmark" translate="label" type="text" sortOrder="40" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Checkout checkbox check mark color</label>
                    <comment>Example: #0072CC</comment>
                </field>
                <field id="color_header" translate="label" type="text" sortOrder="50" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Checkout header color</label>
                    <comment>Example: #0072CC</comment>
                </field>
                <field id="color_link" translate="label" type="text" sortOrder="60" showInDefault="1" showInWebsite="1"
                       showInStore="0">
                    <label>Checkout link color</label>
                    <comment>Example: #0072CC</comment>
                </field>
                <field id="radius_border" translate="label" type="text" sortOrder="70" showInDefault="1"
                       showInWebsite="1" showInStore="0">
                    <label>Checkout border radius</label>
                    <comment>Example: 0px</comment>
                </field>
            </group>
        </section>
    </system>
</config>
